from pathlib import Path
import stat
import argparse
import datetime
def showdir(path='.',all=False,detail=True,human=False):
    p=Path(path)
    for file in p.iterdir():

        if not all and str(file.name.startswith('.')):
            continue
        if detail:
            st=file.stat()
            yield (stat.filemode(st.st_mode),st.st_dev,st.st_nlink,st.st_uid,st.st_gid,st.st_size
                   ,datetime.datetime.fromtimestamp(st.st_atime).strftime('%Y-%m-%d %H:%M:%S'),file.name)
        else:
            yield (file.name,)
arg=argparse.ArgumentParser(prog='ls',add_help=False,description='list all files')
arg.add_argument('path',nargs='?',default='.',help='path help')
arg.add_argument('-l',action='store_true')
arg.add_argument('-h',action='store_true')
args=arg.parse_args(('D:/pypj/pj_oadata/','-l'))
arg.print_help()
print(args)
print(args.path,args.l,args.h)
for file in showdir(args.path,args.l):
    print(file)

arg.add_argument('demo1',default='demo.txt',type=argparse.FileType('r'))
#print(a)
args=arg.parse_args(('D:/pypj/pj_oadata/demo.txt',))

for i in args.demo1:
    print(i)

print(Path('demo.txt').stat())
